<!DOCTYPE html>
<html>
<head>
    <title>Friend Requests</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #121212; /* Dark background for the whole page */
            color: #e0e0e0; /* Light text for readability */
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh; /* Ensure content takes at least the height of the viewport */
        }

        .friend-requests-heading {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100px; /* Adjust the height as needed */
            background-color: #1e1e1e; /* Same background color as the chat room */
            border-radius: 10px;
            border: 1px solid #333333; /* Dark border to blend in */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5); /* Subtle shadow for depth */
            margin-top: 20px; /* Adjust the top margin as needed */
        }

            .friend-requests-heading h1 {
                color: #0dafff; /* Light blue color for the heading */
                margin: 0;
            }

        .friend-requests-list {
            margin-top: 20px; /* Adjust the top margin as needed */
        }

            .friend-requests-list ul {
                list-style: none;
                padding: 0;
            }

            .friend-requests-list li {
                margin-bottom: 10px; /* Adjust the bottom margin as needed */
            }

        /* Style for the username input field */
        .username-input {
            margin-top: 20px; /* Adjust the top margin as needed */
        }

            .username-input input[type="text"] {
                width: 300px; /* Set the width of the input field */
                padding: 10px; /* Adjust padding as needed */
                border-radius: 5px; /* Rounded corners */
                border: 1px solid #333333; /* Dark border */
                background-color: #1e1e1e; /* Dark background */
                color: #ddd; /* Light text */
            }

            .username-input input[type="submit"] {
                margin-top: 10px; /* Adjust margin as needed */
                padding: 10px; /* Adjust padding as needed */
                border-radius: 5px; /* Rounded corners */
                border: none; /* No border */
                background-color: #007aff; /* Bright blue submit button */
                color: white; /* White text */
                cursor: pointer; /* Cursor on hover */
            }

                .username-input input[type="submit"]:hover {
                    background-color: #005ecb; /* Darker blue on hover */
                }
    </style>
</head>
<body>
    <div class="friend-requests-heading">
        <h1>Friend Requests</h1>
    </div>

    <div class="friend-requests-list">
        <ul>
            {% for request in friend_requests %}
            {% if request.receiver.id != request.sender.id %}
            <li>
                {{ request.sender.username }} wants to be your friend.
                <form method="post" action="{% url 'handle_friend_request' request.id %}">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="accept">
                    <button type="submit">Accept</button>
                </form>
                <form method="post" action="{% url 'handle_friend_request' request.id %}">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="reject">
                    <button type="submit">Reject</button>
                </form>
            </li>
            {% endif %}
            {% endfor %}
        </ul>
    </div>

    <!-- Form for sending friend request -->
    <div class="username-input">
        <form id="send-friend-request-form" method="post" action="{% url 'send_friend_request' %}">
            {% csrf_token %}
            <input id="receiver-id" type="hidden" name="receiver_id" value="{{ receiver_id }}">
            <input type="text" name="message" placeholder="Type your message">
            <input type="submit" value="Send Friend Request">
        </form>
    </div>

    <!-- Incoming friend requests -->
    <div class="incoming-requests">
        <h2>Incoming Friend Requests</h2>
        <ul>
            {% for request in incoming_requests %}
            <li>
                {{ request.sender.username }} wants to be your friend.
                <form method="post" action="{% url 'handle_friend_request' request.id %}">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="accept">
                    <button type="submit">Accept</button>
                </form>
                <form method="post" action="{% url 'handle_friend_request' request.id %}">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="reject">
                    <button type="submit">Reject</button>
                </form>
            </li>
            {% endfor %}
        </ul>
    </div>
</body>
</html>
